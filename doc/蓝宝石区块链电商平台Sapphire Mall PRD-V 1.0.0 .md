变更记录

> 记录每次修订的内容，方便追溯。
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/docs/217503647#FReK8)



## 1. 背景介绍
### 1.1 业务背景
> 随着区块链技术和Web3理念的快速发展，数字资产和虚拟商品的交易需求日益增长。传统电商平台在虚拟商品流通、资产确权、交易透明度等方面存在诸多局限，难以满足新一代用户对数字经济的高效、安全和去中心化的需求。同时，DeFi的兴起为数字资产的流动性和价值发现提供了全新解决方案，但其与实际消费场景的结合仍处于初级阶段。在此背景下，Sapphire Mall应运而生，致力于打通DeFi与虚拟商品电商的壁垒，提升平台代币的实际应用价值，激励用户参与生态建设，推动数字经济的普及和创新。
>

### 1.2 业务场景	
| **场景** | **说明** |
| --- | --- |
| 虚拟商品购买 | 用户可在Sapphire Mall平台浏览并购买各类虚拟商品，如NFT数字藏品、在线课程、数字会员、虚拟服务等，所有商品均以平台代币SAP定价和结算，交易过程公开透明、不可篡改 |
| 一键兑换与支付 | 用户持有主流ERC20代币（如USDT、ETH等）时，可在平台内一键兑换为SAP，无需跳转第三方平台，直接完成支付和购物，极大提升了用户体验和交易效率 |
| 流动性挖矿与收益 | 用户可将手中的SAP与主流代币组成交易对，参与平台流动性池，获得SAP奖励和交易手续费分成，实现资产的高效利用和持续增值。 |
| 商家与内容创作者入驻 | 商家和内容创作者可在平台上发布和销售虚拟商品，获得SAP收益，并通过平台的链上结算和透明分账机制，提升信任度和收益效率 |
| 社区治理与激励 | 平台未来将逐步开放DAO治理，持有SAP的用户可参与平台重大决策，共享平台发展红利，推动生态健康成长 |


## 2. 产品概述
### 2.1 产品定位
Sapphire Mall（蓝宝石区块链电商系统，简称Sapphire Mall）是一个专注于虚拟商品交易的创新型区块链电商平台。平台以自发行的ERC20代币SAP为核心流通媒介，结合去中心化金融（DeFi）和电商场景，打造集购物、资产流通、流动性挖矿于一体的Web3虚拟商品生态。



### 2.2 产品逻辑(终极目标)


![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/35395821/1746193416745-a438bcc2-5d0c-4653-89bd-fc50ab72b633.jpeg)



主要业务流程说明：

##### 虚拟商品购买
+ 用户可浏览、搜索、选购各类虚拟商品（如NFT、在线课程、数字会员、虚拟服务等）
+ 所有商品均以SAP代币定价和结算，交易过程链上透明、不可篡改
+ 用户可将商品加入购物车，一键下单，订单状态实时跟踪

##### 代币兑换与支付
+ 用户持有主流ERC20代币（如USDT、ETH等）时，可在平台内一键兑换为SAP，无需跳转第三方平台
+ 兑换过程集成Uniswap等AMM协议，提升支付和购物体验

##### 流动性挖矿与收益
+ 用户可将SAP与主流代币组成交易对，注入平台流动性池
+ 参与流动性池的用户（LP）可获得SAP奖励和交易手续费分成，实现资产增值
+ 平台自动分配奖励，LP可随时提取流动性

##### 商家与内容创作者入住
+ 商家/创作者可发布和管理虚拟商品，查看销售和收益数据
+ 所有收益以SAP结算，链上分账透明
+ 后续版本支持商家KYC认证和保证金管理，提升平台安全和信任

##### 社区治理与激励
+ 持有SAP的用户可参与DAO治理，包括提案、投票、参数调整等。
+ 社区成员可参与平台重大决策，共享平台发展红利



### 2.3 用户价值
+ 普通用户：便捷购买虚拟商品，享受链上购物的高效与透明
+ 流动性提供者（LP）：通过提供流动性获得SAP奖励和手续费分成，实现资产增值
+ 商家与内容创作者：发布和销售虚拟商品，拓展收入渠道
+ 社区成员：参与平台治理和生态建设，共享平台成长红利



### 2.4 创新亮点
+ DeFi与电商深度融合，提升代币实际使用价值和流通效率
+ LP双重收益：获得SAP激励和手续费分成
+ 平台内一键兑换，极致用户体验
+ 交易、奖励、分配全链上透明，资产自托管
+ 支持多样化虚拟商品，满足Web3用户多元需求



### 2.5 平台愿景
致力于成为Web3时代最具创新力和影响力的虚拟商品电商平台，通过提升代币实际应用场景，激励用户参与流动性建设，推动区块链技术在数字经济和虚拟消费领域的广泛落地，服务全球用户的数字生活新需求<font style="color:rgb(216, 222, 233);background-color:rgb(20, 20, 20);"></font>



## 3. 需求说明
### 3.1 相关术语
| 名称 | 说明 |
| --- | --- |
| SAP | Sapphire Mall平台发行的ERC20代币 |
| LP | 流动性提供者，为平台流动性池提供资金的用户 |
| AMM | 自动化做市商，如Uniswap等去中心化交易协议 |
| NFT | 非同质化代币，代表独一无二的数字资产 |
| DAO | 去中心化自治组织，社区治理机制 |




### 3.2 核心功能说明
#### 3.2.1 前端模块设计
1. 用户端
+ 首页：平台公告、热门商品、活动推荐、代币行情等展示。
+ 商品浏览与搜索：支持分类、标签、关键词搜索虚拟商品（如NFT、数字服务等）。
+ 商品详情页：商品介绍、价格、库存、卖家信息、历史交易等。
+ 购物车与下单：支持将商品加入购物车，一键下单，订单状态实时跟踪。
+ 钱包集成：支持MetaMask、WalletConnect等主流钱包连接，显示用户资产余额、授权、签名等。
+ 代币兑换：集成Uniswap等AMM，用户可用主流ERC20代币一键兑换SAP。
+ 流动性池入口：LP用户可查看池子信息、注入/提取流动性、收益明细。
+ 个人中心：订单管理、资产明细、NFT/商品管理、参与治理等。
+ <font style="color:#DF2A3F;">社区与治理：参与DAO提案、投票、社区公告等</font>。
2. 商家端
+ 商品发布与管理：上架/下架商品，编辑商品信息，查看销售数据。
+ 订单管理：查看订单详情、发货、售后处理。
+ 收益管理：查看SAP收入、提现、结算明细。
+ <font style="color:#DF2A3F;">KYC认证与保证金管理（后续版本迭代）</font>
3. 平台管理端
+ 登录与权限管理：多级管理员账号登录，权限分配与管理。
+ 用户管理：用户列表与搜索、用户详情、KYC审核、黑名单管理。
+ 商家管理：商家列表与搜索、商家详情、KYC与保证金审核、违规处理与仲裁。
+ 商品与订单管理：商品管理（上架/下架/审核）、订单管理（状态跟踪、异常处理）、商品审核。
+ 流动性池与奖励管理：流动性池监控、奖励分配管理。
+ 数据统计与报表：平台数据总览、详细报表导出。
+ 公告与内容管理：公告管理、帮助文档/FAQ管理。
+ 合约与参数配置：合约参数管理、合约升级与运维。
+ 操作日志与安全审计：操作日志、安全审计。
+ 多语言切换与系统设置：支持多语言后台界面、平台基础信息、通知设置、管理员账号管理。
+ <font style="background-color:#FBE4E7;">KYC与保证金管理后台（后续版本迭代）</font>
+ 。。。

#### 3.2.2 合约设计
+ SAP代币合约：遵循ERC20标准，支持增发、销毁、转账、授权等。
+ 商品/NFT合约：支持ERC721/ERC1155标准，商品上链确权，支持多种虚拟商品类型。订单与支付逻辑链上执行。
+ 流动性池合约：集成Uniswap等AMM协议，支持用户注入/提取流动性，自动分配SAP奖励和手续费，LP Token管理。
+ 订单与结算合约：订单状态链上记录，自动结算、分账，支持多方分润，支持退款、售后等链上处理。
+ 治理合约（DAO）：支持提案、投票、参数调整等，持有SAP用户可参与治理。
+ 平台管理合约：支持平台参数配置、紧急暂停、合约升级等管理功能。
+ <font style="background-color:#FBE4E7;">商家KYC与保证金合约（后续版本迭代）：KYC状态链上存证（可选，或与中心化KYC服务结合）。保证金合约支持缴纳、锁定、扣除、退还等操作，并与商品发布、商家权限等合约逻辑联动。仲裁与赔付机制链上透明，支持DAO参与。</font>

#### 3.2.3 后端功能设计
+ 用户与权限管理：用户注册、登录、身份验证、权限分级、KYC数据存储与审核（与链上合约联动）。
+ 商品与订单管理：商品信息存储、订单状态跟踪、售后与纠纷处理、数据同步链上合约。
+ <font style="background-color:#FBE4E7;">商家管理：商家资质审核、KYC材料管理、保证金状态管理、违规记录与仲裁流程。</font>
+ 流动性池与奖励管理：LP信息、流动性池状态、奖励分配、收益统计。
+ 数据统计与报表：交易量、活跃用户、收益分布、流动性池深度等多维度数据统计与导出。
+ 公告与内容管理：平台公告、帮助文档、FAQ等内容发布与维护。
+ 合约运维与监控：合约升级、参数调整、紧急暂停、异常预警、操作日志审计。

### 3.3 需求明细列表
1. 前端

[此处为语雀卡片，点击链接查看](https://www.yuque.com/docs/217503647#gq0V2)

2. 后端

[此处为语雀卡片，点击链接查看](https://www.yuque.com/docs/217503647#xV3RG)

3. 合约

[此处为语雀卡片，点击链接查看](https://www.yuque.com/docs/217503647#rtTaj)



4. 其它

[此处为语雀卡片，点击链接查看](https://www.yuque.com/docs/217503647#kUmjo)

### 3.4 需求明细
#### 3.4.1 前端
+ **<font style="color:#DF2A3F;">F01</font>**



+ **<font style="color:#DF2A3F;">F02</font>**



#### 3.4.2 合约


#### 3.4.3 后端
#### 3.4.4 其它




### 3.5 非功能需求
> 安全性：合约需经过第三方审计，防止漏洞和攻击
>
> 性能：平台响应时间<2秒，支持高并发访问
>
> 可用性：7*24小时稳定运行，99.9%可用性
>
> 兼容性：支持主流浏览器和移动端适配
>
> 可扩展性：支持后续功能模块扩展
>
> 合规性：遵守相关法律法规，支持KYC/AML（如有需要）
>
> 用户隐私：保护用户数据和资产隐私
>
> 操作日志与审计：所有关键操作均有日志记录，便于追溯和安全审计
>

## 4. 人员&排期
| **产品** | ... |
| --- | --- |
| **设计** | ... |
| **研发** | ... |
| **运营** | ... |


![画板](https://cdn.nlark.com/yuque/0/2022/jpeg/956523/1657187484086-e91bae66-6de2-45a5-9a87-e4a63e94ac48.jpeg)





